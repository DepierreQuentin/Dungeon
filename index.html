<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Battler: The Sequel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="game-container">
        <div id="title-screen">
            <h1>Card Battler: The Sequel</h1>
            <button id="start-game">Start Game</button>
            <button id="how-to-play">How to Play</button>
            <button id="achievements-button">Achievements</button>
        </div>

        <div id="gold-display" class="hidden">
            <img id="gold-icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KPHJlY3QgeD0iMiIgeT0iOCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiBmaWxsPSIjYjU2NTFkIiBzdHJva2U9IiM1YTJkMGMiIHN0cm9rZS13aWR0aD0iMiIvPgo8cmVjdCB4PSIyIiB5PSI0IiB3aWR0aD0iMjAiIGhlaWdodD0iOCIgc3Ryb2tlPSIjNWEyZDBjIiBmaWxsPSIjZDE3YjIyIiBzdHJva2Utd2lkdGg9IjIiLz4KPGxpbmUgeDE9IjIiIHkxPSIxMCIgeDI9IjIyIiB5Mj0iMTAiIHN0cm9rZT0iIzVhMmQwYyIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjwvc3ZnPg==" alt="Chest">
            <span id="gold-amount">0</span>
        </div>
        <div id="hp-display" class="hidden">
            <img id="hp-icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAyOSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjIyIj4KPHBhdGggZD0iTTIzLjYgMGMtMy4xIDAtNS44IDEuOC03LjYgNC41QzE0LjIgMS44IDExLjUgMCA4LjQgMCAzLjggMCAwIDMuNiAwIDguMWMwIDkuMSAxNiAyMC45IDE2IDIwLjlTMzIgMTcuMiAzMiA4LjFDMzIgMy42IDI4LjIgMCAyMy42IDB6IiBmaWxsPSIjZTYzOTQ2Ii8+Cjwvc3ZnPg==" alt="Heart">
            <div id="hp-bar-container">
                <div id="hp-bar-text">0/0</div>
                <div id="hp-bar"></div>
            </div>
        </div>
        <button id="deck-button" class="hidden">Deck</button>

        <div id="tutorial-screen" class="hidden">
            <h2>How to Play</h2>
            <p>Welcome to Card Battler: The Sequel! Here's how to play:</p>
            <ul>
                <li>Build a deck of powerful cards</li>
                <li>Use energy to play cards each turn</li>
                <li>Defeat enemies to progress through battles</li>
                <li>Earn new cards after each victory</li>
                <li>Create powerful card combinations</li>
            </ul>
            <button id="tutorial-back">Back to Menu</button>
        </div>

        <div id="dungeon-screen" class="hidden">
            <h2>Choose Your Room</h2>
            <div id="room-options"></div>
            <div id="upcoming-rooms">
                <div>Next Rooms: <span id="upcoming-set1"></span></div>
                <div>Following Rooms: <span id="upcoming-set2"></span></div>
            </div>
        </div>

        <div id="game-screen" class="hidden">
            <div id="battle-area">
                <div id="enemy-section">
                    <div id="enemy-stats">
                        <div id="enemy-name">Enemy Name</div>
                        <div id="enemy-health-container">
                            <div id="enemy-health">HP: 50/50</div>
                            <div id="enemy-health-bar"></div>
                        </div>
                        <div id="enemy-intent">Intent: Attack 10</div>
                    </div>
                    <div id="enemy-display">
                        <img id="enemy-image" src="" alt="Enemy">
                    </div>
                </div>

                <div id="battle-log"></div>

                <div id="player-section">
                    <div id="player-stats">
                        <div id="player-name">Player</div>
                        <div id="player-health-container">
                            <div id="player-health">HP: 100/100</div>
                            <div id="player-health-bar"></div>
                        </div>
                        <div id="player-energy">Energy: 3/3</div>
                        <div id="player-block">Block: 0</div>
                    </div>
                </div>
            </div>

            <div id="cards-with-button">
                <div id="action-buttons">
                <button id="end-turn-button">End Turn</button>
                </div>
                <div id="card-area">
                <div id="deck-pile" class="card-pile">
                    <div class="pile-count">20</div>
                </div>
                <div id="hand-container"></div>
                <div id="discard-pile" class="card-pile">
                    <div class="pile-count">0</div>
                </div>
                </div>
            </div>

            <div id="game-buttons"></div>
        </div>

        <div id="reward-screen" class="hidden">
            <h2>Victory!</h2>
            <p id="reward-text"></p>
            <button id="reward-continue">Continue</button>
        </div>

        <div id="game-over-screen" class="hidden">
            <h2>Game Over</h2>
            <p id="game-over-message">You were defeated!</p>
            <p id="final-score">You defeated 0 enemies</p>
            <button id="play-again">Play Again</button>
        </div>


        <div id="merchant-screen" class="hidden">
            <h2>Merchant</h2>
            <div id="pack-options"></div>
            <button id="close-merchant">Continue</button>
        </div>

        <div id="pack-screen" class="hidden">
            <h2>Pack Contents</h2>
            <div id="pack-cards"></div>
            <button id="pack-continue">Continue</button>
        </div>

        <div id="deck-screen" class="hidden">
            <button id="close-deck" class="close-button">&times;</button>
            <h2>Your Deck</h2>
            <div id="deck-cards"></div>
        </div>

        <div id="rest-screen" class="hidden">
            <p id="rest-text"></p>
            <button id="rest-continue">Continue</button>
        </div>

        <div id="event-screen" class="hidden">
            <p id="event-text"></p>
            <div id="event-buttons">
                <button id="event-buy" class="hidden">Buy</button>
                <button id="event-skip" class="hidden">Skip</button>
                <button id="event-continue">Continue</button>
            </div>
        </div>

        <div id="achievement-screen" class="hidden">
            <h2>Achievements</h2>
            <div id="achievement-list"></div>
            <button id="close-achievements">Close</button>
        </div>
    </div>

    <div id="achievement-notification" class="hidden">
        <img src="images/achievement_icon.png" alt="Achievement">
        <div class="achievement-text">
            <h3></h3>
            <p></p>
        </div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "gsap": "https://cdn.jsdelivr.net/npm/gsap@3.12.2/+esm"
        }
    }
    </script>
    <script type="module" src="cards.js"></script>
    <script type="module" src="enemies.js"></script>
    <script type="module" src="game.js"></script>
    <button id="card-index-button">Card Index</button>
    <div class="card-backdrop"></div>
    <div id="card-index-screen">
        <button id="card-index-close">Ã—</button>
        <h2>Card Collection</h2>
        <div id="card-index-content"></div>
    </div>
</body>
</html>